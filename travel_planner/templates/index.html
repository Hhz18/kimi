<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>Kimi æ—…è¡Œè§„åˆ’åŠ©æ‰‹</title>
    <!-- Flatpickr CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">

    <!-- Bootstrap  5  CSS å®ç°ç•Œé¢ç¾åŒ– -->
     <link
     href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
     rel="stylesheet"
     >

     <style>
        body{
            padding: 2rem;
            background-color: #f8f9fa;
        }
        .map-frame{
            border:1px solid #ccc;
            margin-bottom: 1rem;
            border-radius: 6px;
            overflow: hidden;
        }
        .hidden-map {
            display: none;
        }
     </style>

     <script>
        function showMoreMaps() {
        const hiddenMaps = document.querySelectorAll('.hidden-map');
        hiddenMaps.forEach(el => el.style.display = 'block');
        event.target.style.display = 'none'; // éšè—æŒ‰é’®
        }

        function updateMapMModes() {
            const mode =document.getElementById('travel_mode').value;
            const maps = document.querySelectorAll('.map-frame');
            iframes.forEach(iframe =>{
                const from =iframe.dataset.start;
                const to =iframe.dataset.end;
                iframe.src = `https://uri.amap.com/navigation?from=${from}&to=${to}&mode=${mode}&policy=1&src=travel-planner`;
            })
        }
     </script>
</head>

<body>
    <div class="container">
         <h2>Kimi æ—…è¡Œè§„åˆ’åŠ©æ‰‹</h2>
         
    <form method="post">
        <div class="mb-3">
            <label for="user_input" class="form-label">è¯·è¾“å…¥ä½ çš„æ—…è¡Œè®¡åˆ’ï¼š</label">
            <textarea class="form-control" id="user_input" rows="3" required name="user_input"></textarea>
        </div>
        <div class="mb-3">
            <label for="start_date" class="form-label">å‡ºå‘æ—¥æœŸï¼š</label>
            <input type="text" id="start_date" name="start_date" class="form-control" placeholder="é€‰æ‹©æ—¥æœŸ" required>
        </div>
        <button type="submit">ç”Ÿæˆè§„åˆ’</button>
    </form>

    <hr>
    <!-- æ˜¾ç¤ºæ—…è¡Œè®¡åˆ’ç»“æœ -->
    {% if reply %}
    <div class="card mt-4">
        <div class="card-header">ç”Ÿæˆçš„æ—…æ¸¸è®¡åˆ’</div>
        <div class="card-body">
            {{ reply |safe }}
        </div>
    </div>
    {% endif %}


    <div class="mb-3">
        <label for="travel_mode" class="form-label">äº¤é€šæ–¹å¼ï¼š</label>
        <select id="travel_mode" class="form-select w-auto" onchange="updateMapMModes()">
            <option value="car">é©¾è½¦ ğŸš—</option>
            <option value="bus">å…¬äº¤ ğŸšŒ</option>
            <option value="walk">æ­¥è¡Œ ğŸš¶</option>
        </select>
    </div>
    <!-- æ˜¾ç¤ºå¤šæ®µåœ°å›¾ -->
    {% if map_iframe %}
    <div class="card mt-4">
        <h4>è·¯çº¿åœ°å›¾é¢„è§ˆï¼š</h4>
        {{ map_iframe|safe }}
    </div>
    {% endif %}
    </div>

    <!-- Bootstrap 5 JS å®ç°ç•Œé¢ç¾åŒ– -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"></script>
    <!-- Flatpickr JS -->
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>


    <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/zh.js"></script>
<script>
    flatpickr("#start_date", {
        locale: "zh",
        dateFormat: "Y-m-d",
        minDate: "today",
        defaultDate: "today"
    });
</script>

</body>


</html>
